/*
 * File: app/view/TripPlanner.js
 *
 * This file was generated by Sencha Architect version 2.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.TripPlanner', {
    extend: 'Ext.form.Panel',

    frame: false,
    height: 732,
    width: 1127,
    bodyPadding: 10,
    header: true,
    hideCollapseTool: true,
    title: 'Plan Trip',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'fieldcontainer',
                    border: 1,
                    height: 120,
                    fieldLabel: 'Search Trips',
                    items: [
                        {
                            xtype: 'datefield',
                            fieldLabel: 'Trip Start'
                        },
                        {
                            xtype: 'timefield',
                            fieldLabel: 'Start Time'
                        },
                        {
                            xtype: 'datefield',
                            fieldLabel: 'Trip End'
                        },
                        {
                            xtype: 'timefield',
                            fieldLabel: 'End Time'
                        },
                        {
                            xtype: 'textfield',
                            fieldLabel: 'Emp. ID'
                        },
                        {
                            xtype: 'textfield',
                            fieldLabel: 'Department'
                        },
                        {
                            xtype: 'textfield',
                            fieldLabel: 'Location'
                        },
                        {
                            xtype: 'button',
                            text: 'Search'
                        }
                    ]
                },
                {
                    xtype: 'gridpanel',
                    height: 199,
                    title: 'Trips Result',
                    columns: [
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'string',
                            text: 'Requestor Name'
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'number',
                            text: 'Requestor Emp.ID'
                        },
                        {
                            xtype: 'datecolumn',
                            dataIndex: 'date',
                            text: 'Trip Date From'
                        },
                        {
                            xtype: 'datecolumn',
                            dataIndex: 'date',
                            text: 'Trip Date To'
                        },
                        {
                            xtype: 'datecolumn',
                            dataIndex: 'date',
                            text: 'Start Time'
                        },
                        {
                            xtype: 'datecolumn',
                            dataIndex: 'date',
                            text: 'End Time'
                        },
                        {
                            xtype: 'datecolumn',
                            dataIndex: 'date',
                            text: 'Requested Date'
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'bool',
                            text: 'Pick/Drop'
                        },
                        {
                            xtype: 'gridcolumn',
                            text: 'Assign Cab'
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'bool',
                            emptyCellText: '4',
                            text: 'Seats Remaining'
                        },

									{
												header: 'Registered',
												dataIndex: 'registered',
												align: 'center',
												width: 100,
												renderer: function(value, metaData, record, rowIndex, colIndex, store) {
													if (record.data.registered)
														return '&lt;img src="images/yes.png" /&gt;';
													else
														return '&lt;img src="images/no.png" /&gt;';
												}


                    ],
                    viewConfig: {
                        plugins: [
                            Ext.create('Ext.grid.plugin.DragDrop', {
                                ptype: 'gridviewdragdrop'
                            })
                        ]
                    },
                    selModel: Ext.create('Ext.selection.CheckboxModel', {

                    }),
                    plugins: [
                        Ext.create('Ext.grid.plugin.RowEditing', {
                            ptype: 'rowediting'
                        }),
                        Ext.create('Ext.grid.plugin.CellEditing', {
                            ptype: 'cellediting'
                        })
                    ]
                },
                {
                    xtype: 'panel',
                    title: 'Cab Selector',
                    items: [
                        {
                            xtype: 'fieldset',
                            title: 'Cab Lookup',
                            items: [
                                {
                                    xtype: 'triggerfield',
                                    anchor: '100%',
                                    fieldLabel: 'Cab Lookup'
                                }
                            ]
                        }
                    ]
                }
            ]
        });

        me.callParent(arguments);
    }

//Add function

   // Renderer function
    function renderInstall(value, id, r)
    {
 
            var id = Ext.id();
            if (r.data.registered == false)
            {
                createGridButton.defer(1, this, ['Install', id, r]);
                return('&lt;div id="' + id + '"&gt;&lt;/div&gt;');
            }else
            {
                createGridButton.defer(1, this, ['ReInstall', id, r]);
                return('&lt;div id="' + id + '"&gt;&lt;/div&gt;');
            }
 
    }
    function createGridButton(value, id, record) {
        new Ext.Button({
            text: value
            ,iconCls: IconManager.getIcon('package_add')
            ,handler : function(btn, e) {
                // do whatever you want here
            }
        }).render(document.body, id);
    }
//end function

});